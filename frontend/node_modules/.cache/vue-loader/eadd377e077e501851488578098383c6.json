{"remainingRequest":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/john/Documents/Projects/Хакатоны/mvd/frontend/src/views/Main/Docs.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/src/views/Main/Docs.vue","mtime":1620583586729},{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRG9jcyIsCiAgY29tcG9uZW50czoge30sCgogIGRhdGE6ICgpID0+ICh7CiAgICBmaWxlczogbnVsbCwKICAgIGZpbGVzX3VybHM6IHt9LAogICAgcHJldmlld19sb2FkZWQ6IGZhbHNlLAogICAgcHJldmlldzogMCwKCiAgICByZXNwb25zZToge30sCiAgICBsb2FkZWQ6IDAsCiAgICBpc0xvYWRlZDogZmFsc2UsCiAgfSksCgogIHdhdGNoOiB7CiAgICBmaWxlcyh2KSB7CiAgICAgIGNvbnNvbGUubG9nKHYpOwogICAgICBpZiAodiAhPSBudWxsKSB7CiAgICAgICAgaWYgKHZbMF0pIHsKICAgICAgICAgIHRoaXMubG9hZGVkID0gMDsKICAgICAgICAgIHRoaXMuaXNMb2FkZWQgPSBudWxsOwogICAgICAgICAgdGhpcy5yZXNwb25zZSA9IHt9OwogICAgICAgICAgdi5mb3JFYWNoKChlKSA9PiB7CiAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGV2ZW50KSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5maWxlc191cmxzW2UubmFtZV0gPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgICAgICAgIHRoaXMucHJldmlldyArPSAxOwogICAgICAgICAgICB9OwogICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmZpbGVzX3VybHMgPSB7fTsKICAgICAgICAgIHRoaXMucHJldmlld19sb2FkZWQgPSBmYWxzZTsKICAgICAgICAgIHRoaXMucHJldmlldyA9IDA7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZmlsZXNfdXJscyA9IHt9OwogICAgICAgIHRoaXMucHJldmlld19sb2FkZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLnByZXZpZXcgPSAwOwogICAgICB9CiAgICB9LAoKICAgIHByZXZpZXcoZGF0YSkgewogICAgICBpZiAoZGF0YSAhPSAwKSB7CiAgICAgICAgaWYgKGRhdGEgPT0gdGhpcy5maWxlcy5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMucHJldmlldyA9IDA7CiAgICAgICAgICB0aGlzLnByZXZpZXdfbG9hZGVkID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgbG9hZGVkKGRhdGEpIHsKICAgICAgaWYgKGRhdGEgIT0gMCkgewogICAgICAgIGlmIChkYXRhID09IHRoaXMuZmlsZXMubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLmxvYWRlZCA9IDA7CiAgICAgICAgICB0aGlzLmZpbGVzID0gbnVsbDsKICAgICAgICAgIHRoaXMuaXNMb2FkZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICB9LAoKICBtZXRob2RzOiB7CiAgICBzdWJtaXRGaWxlcygpIHsKICAgICAgdGhpcy5yZXNwb25zZSA9IFtdOwogICAgICB0aGlzLmlzTG9hZGVkID0gZmFsc2U7CiAgICAgIHRoaXMuZmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4gewogICAgICAgIGxldCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgZGF0YS5hcHBlbmQoImZpbGUiLCBmaWxlLCBmaWxlLm5hbWUpOwogICAgICAgIGF4aW9zKHsKICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgdXJsOiBgJHt0aGlzLiRzdG9yZS5zdGF0ZS5iYWNrZW5kVXJsfS9maWxlL3VwbG9hZC9gLAogICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYFRva2VuICR7dGhpcy4kc3RvcmUuc3RhdGUudG9rZW59YCwKICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIiwKICAgICAgICAgICAgIkNvbnRlbnQtRGlzcG9zaXRpb24iOiBgYXR0YWNobWVudDsgZmlsZW5hbWU9JHtmaWxlLm5hbWV9YCwKICAgICAgICAgIH0sCiAgICAgICAgfSkudGhlbigocikgPT4gewogICAgICAgICAgdGhpcy5yZXNwb25zZVtmaWxlLm5hbWVdID0gci5kYXRhOwogICAgICAgICAgdGhpcy5sb2FkZWQgKz0gMTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Docs.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Docs.vue","sourceRoot":"src/views/Main","sourcesContent":["<template>\n  <v-container style='margin-top: 60px;'>\n    <v-row :justify='isLoaded || !preview_loaded ? \"center\" : \"space-between\"'>\n      <v-col cols=\"3\">\n        <v-row>\n          <v-file-input\n            chips\n            multiple\n            accept=\"application/pdf\"\n            append-icon=\"mdi-upload\"\n            prepend-icon=\"\"\n            label=\"Загрузите документы\"\n            outlined\n            rounded\n            solo\n            ref=\"files\"\n            v-model=\"files\"\n          >\n            <template v-slot:selection=\"data\">\n              <v-chip>\n                {{ data.text }}\n              </v-chip>\n            </template>\n            ></v-file-input\n          >\n        </v-row>\n\n        <v-row justify=\"center\">\n          <v-btn text x-large dark @click=\"submitFiles\">Загрузить</v-btn>\n        </v-row>\n      </v-col>\n\n      <v-col v-if=\"preview_loaded\" style=\"padding-top: 0; margin-left: 40px;\">\n        <v-row>\n          <v-col\n            cols=\"4\"\n            v-for=\"(file, index) in Object.keys(files_urls)\"\n            :key=\"index\"\n            style=\"padding-top: 0\"\n          >\n            <v-card\n              elevation=\"6\"\n              style=\"border: 2px solid rgba(0, 0, 0, 0.2); border-radius: 20px\"\n              class=\"mt-3\"\n            >\n              <v-card-title>{{ file }}</v-card-title>\n              <v-card-text>\n                <iframe\n                  width=\"100%\"\n                  height=\"400\"\n                  style=\"position: relative; z-index: 10\"\n                  :src=\"files_urls[file]\"\n                >\n                </iframe>\n              </v-card-text>\n            </v-card>\n          </v-col>\n        </v-row>\n      </v-col>\n    </v-row>\n\n    <v-row justify='center'>\n      <v-col cols=\"8\" v-if=\"isLoaded\">\n        <v-card elevation=\"0\" style=\"border-radius: 20px\">\n          <v-btn\n            fab\n            top\n            right\n            absolute\n            elevation=\"0\"\n            @click=\"\n              response = {};\n              isLoaded = false;\n            \"\n            style=\"border: 1px solid rgba(0, 0, 0, 0.2)\"\n          >\n            <v-icon>mdi-close-thick</v-icon>\n          </v-btn>\n          <v-card\n            v-for=\"(key, index) in Object.keys(response)\"\n            :key=\"index\"\n            elevation=\"6\"\n            style=\"border: 2px solid rgba(0, 0, 0, 0.2); border-radius: 20px; margin-top: 40px;\"\n          >\n            <v-card-title>{{ key }} </v-card-title>\n            <v-card-text>\n              <v-row class=\"p-3\">\n                <v-col>\n                  <iframe\n                    width=\"100%\"\n                    height=\"400\"\n                    style=\"position: relative; z-index: 10\"\n                    :src=\"`${$store.state.backendUrl}/file/view/${response[key].id}/`\"\n                  >\n                  </iframe>\n                </v-col>\n\n                <v-col>\n                  <iframe\n                    width=\"100%\"\n                    height=\"400\"\n                    style=\"position: relative; z-index: 10\"\n                    :src=\"`${$store.state.backendUrl}/file/view/formated/${response[key].id}/`\"\n                  >\n                  </iframe>\n                </v-col>\n              </v-row>\n            </v-card-text>\n          </v-card>\n        </v-card>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n\n\n<script>\nexport default {\n  name: \"Docs\",\n  components: {},\n\n  data: () => ({\n    files: null,\n    files_urls: {},\n    preview_loaded: false,\n    preview: 0,\n\n    response: {},\n    loaded: 0,\n    isLoaded: false,\n  }),\n\n  watch: {\n    files(v) {\n      console.log(v);\n      if (v != null) {\n        if (v[0]) {\n          this.loaded = 0;\n          this.isLoaded = null;\n          this.response = {};\n          v.forEach((e) => {\n            var reader = new FileReader();\n            reader.onload = (event) => {\n              this.files_urls[e.name] = event.target.result;\n              this.preview += 1;\n            };\n            reader.readAsDataURL(e);\n          });\n        } else {\n          this.files_urls = {};\n          this.preview_loaded = false;\n          this.preview = 0;\n        }\n      } else {\n        this.files_urls = {};\n        this.preview_loaded = false;\n        this.preview = 0;\n      }\n    },\n\n    preview(data) {\n      if (data != 0) {\n        if (data == this.files.length) {\n          this.preview = 0;\n          this.preview_loaded = true;\n        }\n      }\n    },\n\n    loaded(data) {\n      if (data != 0) {\n        if (data == this.files.length) {\n          this.loaded = 0;\n          this.files = null;\n          this.isLoaded = true;\n        }\n      }\n    },\n  },\n\n  methods: {\n    submitFiles() {\n      this.response = [];\n      this.isLoaded = false;\n      this.files.forEach((file) => {\n        let data = new FormData();\n        data.append(\"file\", file, file.name);\n        axios({\n          method: \"POST\",\n          url: `${this.$store.state.backendUrl}/file/upload/`,\n          data: data,\n          headers: {\n            Authorization: `Token ${this.$store.state.token}`,\n            \"Content-Type\": \"multipart/form-data\",\n            \"Content-Disposition\": `attachment; filename=${file.name}`,\n          },\n        }).then((r) => {\n          this.response[file.name] = r.data;\n          this.loaded += 1;\n        });\n      });\n    },\n  },\n};\n</script>\n\n\n<style lang=\"scss\">\n</style>"]}]}