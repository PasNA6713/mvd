{"remainingRequest":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/john/Documents/Projects/Хакатоны/mvd/frontend/src/components/stat/StatFilter.vue?vue&type=style&index=0&id=e313c3c2&lang=scss&scoped=true&","dependencies":[{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/src/components/stat/StatFilter.vue","mtime":1620584643759},{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgIkAvc3R5bGVzL2NvbW1vbi5zY3NzIjsKQGltcG9ydCAiQC9zdHlsZXMvdmlld3Mvc3RhdC5zY3NzIjsK"},{"version":3,"sources":["StatFilter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA","file":"StatFilter.vue","sourceRoot":"src/components/stat","sourcesContent":["<template>\n  <v-card elevation=\"0\">\n    <v-row class=\"px-3\">\n      <v-col cols=\"3\" v-for=\"field in Object.keys(filter)\" :key=\"field\">\n        <v-autocomplete\n          v-if='typeof(filterParams[field])==\"object\"'\n          :items=\"filterParams[field]\"\n          v-model=\"chosedData[filter[field]]\"\n          :label=\"field\"\n          clearable\n        ></v-autocomplete>\n      </v-col>\n    </v-row>\n\n    <v-row>\n      <v-col cols=\"3\">\n        <DateTimeField v-model=\"chosedData.datetime_after\" label=\"С\" />\n      </v-col>\n\n      <v-col cols=\"3\">\n        <DateTimeField v-model=\"chosedData.datetime_before\" label=\"По\" />\n      </v-col>\n\n      <v-col cols=\"3\">\n        <v-select\n          v-model=\"chosedData.time_group\"\n          :items=\"Object.keys(timeGroups)\"\n          label=\"Время\"\n          class=\"md-4\"\n        >\n        </v-select>\n      </v-col>\n\n      <v-col cols=\"3\">\n        <v-row justify=\"center\">\n          <v-btn :color=\"$route.meta.theme\" @click=\"send\" x-large dark>\n            Найти\n          </v-btn>\n        </v-row>\n      </v-col>\n    </v-row>\n\n    <v-btn @click=\"clearForm\" fab elevation=\"0\" absolute right top>\n      <v-icon>mdi-restart</v-icon>\n    </v-btn>\n  </v-card>\n</template>\n\n<style lang=\"scss\" scoped>\n@import \"@/styles/common.scss\";\n@import \"@/styles/views/stat.scss\";\n</style>\n\n<script>\nimport DateTimeField from \"../DateTimeForm.vue\";\n\nexport default {\n  name: \"StatFilter\",\n\n  components: {\n    DateTimeField,\n  },\n\n  data() {\n    return {\n      filter: {\n        \"Город\": \"parent_region\",\n        \"Регион\": \"region\",\n        \"Способ совершения преступления\": \"category\",\n        \"Освещение\": \"light\",\n        \"Адрес\": \"address\",\n        \"Наименование органа\": \"organization\",\n        \"Вид уголовного преследования\": \"criminal_type\",\n        \"Кем выявлено\": \"employee\",\n        \"Выявлено по оперативным данным\": \"is_operative\",\n        \"Квалификация преступления\": \"crime_qualification\",\n        \"пункт Квалификация преступления по УК РФ\": \"yk_qualification\",\n        \"Тяжесть\": \"severity\",\n        \"Приготовление/покушение\": \"is_attempt\",\n        \"Ущерб\": \"damage\",\n        \"Направленность\": \"crime_direction\",\n        \"Наименование наркотика\": \"drug_name\",\n      },\n\n      filterParams: null,\n\n      timeGroups: {\n        \"Все время\": null,\n        \"2.00 - 11.00\": 0,\n        \"11.00 - 16.00\": 1,\n        \"16.00 - 21.00\": 2,\n        \"21.00 - 2.00\": 3,\n      },\n\n      chosedData: {\n        datetime_after: null,\n        datetime_before: new Date(),\n        time_group: 'Все время'\n      },\n\n      loaded: false\n    };\n  },\n\n  methods: {\n    send() {\n      this.chosedData.time_group = this.timeGroups[this.chosedData.time_group];\n      this.$emit(\"get-data\", this.chosedData);\n    },\n\n    getData() {\n      this.filterParams = {...this.filter}\n      Object.keys(this.filter).forEach((key) => {\n        axios\n          .get(\n            `${this.$store.state.backendUrl}/map/get-filter-params/${this.filter[key]}/`\n          )\n          .then((response) => {\n            this.filterParams[key] = response.data;\n            this.chosedData[this.filter[key]] = null;\n          });\n      });\n    },\n\n    clearForm() {\n      this.chosedData = {\n        datetime_before: new Date(),\n        time_group: \"Все время\"\n      }\n    },\n  },\n\n  async created() {\n    await this.getData();\n  },\n};\n</script>"]}]}