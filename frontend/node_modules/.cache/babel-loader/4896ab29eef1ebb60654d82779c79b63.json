{"remainingRequest":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/thread-loader/dist/cjs.js!/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/babel-loader/lib/index.js!/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/john/Documents/Projects/Хакатоны/mvd/frontend/src/views/Main/Docs.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/src/views/Main/Docs.vue","mtime":1620583586729},{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/john/Documents/Projects/Хакатоны/mvd/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkRvY3MiLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaWxlczogbnVsbCwKICAgICAgZmlsZXNfdXJsczoge30sCiAgICAgIHByZXZpZXdfbG9hZGVkOiBmYWxzZSwKICAgICAgcHJldmlldzogMCwKICAgICAgcmVzcG9uc2U6IHt9LAogICAgICBsb2FkZWQ6IDAsCiAgICAgIGlzTG9hZGVkOiBmYWxzZQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBmaWxlczogZnVuY3Rpb24gZmlsZXModikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2codik7CgogICAgICBpZiAodiAhPSBudWxsKSB7CiAgICAgICAgaWYgKHZbMF0pIHsKICAgICAgICAgIHRoaXMubG9hZGVkID0gMDsKICAgICAgICAgIHRoaXMuaXNMb2FkZWQgPSBudWxsOwogICAgICAgICAgdGhpcy5yZXNwb25zZSA9IHt9OwogICAgICAgICAgdi5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgIF90aGlzLmZpbGVzX3VybHNbZS5uYW1lXSA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICAgICAgX3RoaXMucHJldmlldyArPSAxOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5maWxlc191cmxzID0ge307CiAgICAgICAgICB0aGlzLnByZXZpZXdfbG9hZGVkID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnByZXZpZXcgPSAwOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZpbGVzX3VybHMgPSB7fTsKICAgICAgICB0aGlzLnByZXZpZXdfbG9hZGVkID0gZmFsc2U7CiAgICAgICAgdGhpcy5wcmV2aWV3ID0gMDsKICAgICAgfQogICAgfSwKICAgIHByZXZpZXc6IGZ1bmN0aW9uIHByZXZpZXcoZGF0YSkgewogICAgICBpZiAoZGF0YSAhPSAwKSB7CiAgICAgICAgaWYgKGRhdGEgPT0gdGhpcy5maWxlcy5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMucHJldmlldyA9IDA7CiAgICAgICAgICB0aGlzLnByZXZpZXdfbG9hZGVkID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBsb2FkZWQ6IGZ1bmN0aW9uIGxvYWRlZChkYXRhKSB7CiAgICAgIGlmIChkYXRhICE9IDApIHsKICAgICAgICBpZiAoZGF0YSA9PSB0aGlzLmZpbGVzLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5sb2FkZWQgPSAwOwogICAgICAgICAgdGhpcy5maWxlcyA9IG51bGw7CiAgICAgICAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdEZpbGVzOiBmdW5jdGlvbiBzdWJtaXRGaWxlcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnJlc3BvbnNlID0gW107CiAgICAgIHRoaXMuaXNMb2FkZWQgPSBmYWxzZTsKICAgICAgdGhpcy5maWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgdmFyIGRhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBkYXRhLmFwcGVuZCgiZmlsZSIsIGZpbGUsIGZpbGUubmFtZSk7CiAgICAgICAgYXhpb3MoewogICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICB1cmw6ICIiLmNvbmNhdChfdGhpczIuJHN0b3JlLnN0YXRlLmJhY2tlbmRVcmwsICIvZmlsZS91cGxvYWQvIiksCiAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiVG9rZW4gIi5jb25jYXQoX3RoaXMyLiRzdG9yZS5zdGF0ZS50b2tlbiksCiAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIsCiAgICAgICAgICAgICJDb250ZW50LURpc3Bvc2l0aW9uIjogImF0dGFjaG1lbnQ7IGZpbGVuYW1lPSIuY29uY2F0KGZpbGUubmFtZSkKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICBfdGhpczIucmVzcG9uc2VbZmlsZS5uYW1lXSA9IHIuZGF0YTsKICAgICAgICAgIF90aGlzMi5sb2FkZWQgKz0gMTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Docs.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-container style='margin-top: 60px;'>\n    <v-row :justify='isLoaded || !preview_loaded ? \"center\" : \"space-between\"'>\n      <v-col cols=\"3\">\n        <v-row>\n          <v-file-input\n            chips\n            multiple\n            accept=\"application/pdf\"\n            append-icon=\"mdi-upload\"\n            prepend-icon=\"\"\n            label=\"Загрузите документы\"\n            outlined\n            rounded\n            solo\n            ref=\"files\"\n            v-model=\"files\"\n          >\n            <template v-slot:selection=\"data\">\n              <v-chip>\n                {{ data.text }}\n              </v-chip>\n            </template>\n            ></v-file-input\n          >\n        </v-row>\n\n        <v-row justify=\"center\">\n          <v-btn text x-large dark @click=\"submitFiles\">Загрузить</v-btn>\n        </v-row>\n      </v-col>\n\n      <v-col v-if=\"preview_loaded\" style=\"padding-top: 0; margin-left: 40px;\">\n        <v-row>\n          <v-col\n            cols=\"4\"\n            v-for=\"(file, index) in Object.keys(files_urls)\"\n            :key=\"index\"\n            style=\"padding-top: 0\"\n          >\n            <v-card\n              elevation=\"6\"\n              style=\"border: 2px solid rgba(0, 0, 0, 0.2); border-radius: 20px\"\n              class=\"mt-3\"\n            >\n              <v-card-title>{{ file }}</v-card-title>\n              <v-card-text>\n                <iframe\n                  width=\"100%\"\n                  height=\"400\"\n                  style=\"position: relative; z-index: 10\"\n                  :src=\"files_urls[file]\"\n                >\n                </iframe>\n              </v-card-text>\n            </v-card>\n          </v-col>\n        </v-row>\n      </v-col>\n    </v-row>\n\n    <v-row justify='center'>\n      <v-col cols=\"8\" v-if=\"isLoaded\">\n        <v-card elevation=\"0\" style=\"border-radius: 20px\">\n          <v-btn\n            fab\n            top\n            right\n            absolute\n            elevation=\"0\"\n            @click=\"\n              response = {};\n              isLoaded = false;\n            \"\n            style=\"border: 1px solid rgba(0, 0, 0, 0.2)\"\n          >\n            <v-icon>mdi-close-thick</v-icon>\n          </v-btn>\n          <v-card\n            v-for=\"(key, index) in Object.keys(response)\"\n            :key=\"index\"\n            elevation=\"6\"\n            style=\"border: 2px solid rgba(0, 0, 0, 0.2); border-radius: 20px; margin-top: 40px;\"\n          >\n            <v-card-title>{{ key }} </v-card-title>\n            <v-card-text>\n              <v-row class=\"p-3\">\n                <v-col>\n                  <iframe\n                    width=\"100%\"\n                    height=\"400\"\n                    style=\"position: relative; z-index: 10\"\n                    :src=\"`${$store.state.backendUrl}/file/view/${response[key].id}/`\"\n                  >\n                  </iframe>\n                </v-col>\n\n                <v-col>\n                  <iframe\n                    width=\"100%\"\n                    height=\"400\"\n                    style=\"position: relative; z-index: 10\"\n                    :src=\"`${$store.state.backendUrl}/file/view/formated/${response[key].id}/`\"\n                  >\n                  </iframe>\n                </v-col>\n              </v-row>\n            </v-card-text>\n          </v-card>\n        </v-card>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n\n\n<script>\nexport default {\n  name: \"Docs\",\n  components: {},\n\n  data: () => ({\n    files: null,\n    files_urls: {},\n    preview_loaded: false,\n    preview: 0,\n\n    response: {},\n    loaded: 0,\n    isLoaded: false,\n  }),\n\n  watch: {\n    files(v) {\n      console.log(v);\n      if (v != null) {\n        if (v[0]) {\n          this.loaded = 0;\n          this.isLoaded = null;\n          this.response = {};\n          v.forEach((e) => {\n            var reader = new FileReader();\n            reader.onload = (event) => {\n              this.files_urls[e.name] = event.target.result;\n              this.preview += 1;\n            };\n            reader.readAsDataURL(e);\n          });\n        } else {\n          this.files_urls = {};\n          this.preview_loaded = false;\n          this.preview = 0;\n        }\n      } else {\n        this.files_urls = {};\n        this.preview_loaded = false;\n        this.preview = 0;\n      }\n    },\n\n    preview(data) {\n      if (data != 0) {\n        if (data == this.files.length) {\n          this.preview = 0;\n          this.preview_loaded = true;\n        }\n      }\n    },\n\n    loaded(data) {\n      if (data != 0) {\n        if (data == this.files.length) {\n          this.loaded = 0;\n          this.files = null;\n          this.isLoaded = true;\n        }\n      }\n    },\n  },\n\n  methods: {\n    submitFiles() {\n      this.response = [];\n      this.isLoaded = false;\n      this.files.forEach((file) => {\n        let data = new FormData();\n        data.append(\"file\", file, file.name);\n        axios({\n          method: \"POST\",\n          url: `${this.$store.state.backendUrl}/file/upload/`,\n          data: data,\n          headers: {\n            Authorization: `Token ${this.$store.state.token}`,\n            \"Content-Type\": \"multipart/form-data\",\n            \"Content-Disposition\": `attachment; filename=${file.name}`,\n          },\n        }).then((r) => {\n          this.response[file.name] = r.data;\n          this.loaded += 1;\n        });\n      });\n    },\n  },\n};\n</script>\n\n\n<style lang=\"scss\">\n</style>"],"sourceRoot":"src/views/Main"}]}